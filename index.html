<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3D FPS Example</title>
<style>
  body { margin:0; overflow:hidden; }
  #instructions {
    position: absolute; width: 100%; height: 100%;
    background-color: rgba(0,0,0,0.8); color: white;
    display: flex; align-items: center; justify-content: center;
    text-align: center; cursor: pointer; z-index: 1;
  }
</style>
</head>
<body>

<div id="instructions">
  Click to play<br>(WASD to move, Mouse to look)
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.162.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.162.0/examples/js/controls/PointerLockControls.js"></script>

<script>
let camera, scene, renderer, controls;
let moveForward = false, moveBackward = false, moveLeft = false, moveRight = false;
let velocity = new THREE.Vector3();

init();
animate();

function init() {
  scene = new THREE.Scene();
  scene.background = new THREE.Color(0x87ceeb); // sky blue

  camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);

  renderer = new THREE.WebGLRenderer({antialias:true});
  renderer.setSize(window.innerWidth, window.innerHeight);
  document.body.appendChild(renderer.domElement);

  // PointerLockControls
  controls = new THREE.PointerLockControls(camera, document.body);

  const instructions = document.getElementById('instructions');
  instructions.addEventListener('click', () => { controls.lock(); });

  controls.addEventListener('lock', () => { instructions.style.display = 'none'; });
  controls.addEventListener('unlock', () => { instructions.style.display = ''; });

  scene.add(controls.getObject());

  // Ground
  const groundGeometry = new THREE.BoxGeometry(100, 1, 100);
  const groundMaterial = new THREE.MeshStandardMaterial({color: 0x228B22});
  const ground = new THREE.Mesh(groundGeometry, groundMaterial);
  ground.position.y = -0.5;
  scene.add(ground);

  // Lights
  const light = new THREE.DirectionalLight(0xffffff, 1);
  light.position.set(10, 20, 10);
  scene.add(light);
  scene.add(new THREE.AmbientLight(0x404040));

  // Arm placeholder
  const armGeometry = new THREE.BoxGeometry(0.3, 0.3, 1);
  const armMaterial = new THREE.MeshStandardMaterial({color: 0xffd700});
  const arm = new THREE.Mesh(armGeometry, armMaterial);
  arm.position.set(0.5, -0.5, -1);
  camera.add(arm);

  // Controls events
  document.addEventListener('keydown', (event) => {
    switch(event.code){
      case 'KeyW': moveForward=true; break;
      case 'KeyS': moveBackward=true; break;
      case 'KeyA': moveLeft=true; break;
      case 'KeyD': moveRight=true; break;
    }
  });
  document.addEventListener('keyup', (event) => {
    switch(event.code){
      case 'KeyW': moveForward=false; break;
      case 'KeyS': moveBackward=false; break;
      case 'KeyA': moveLeft=false; break;
      case 'KeyD': moveRight=false; break;
    }
  });

  window.addEventListener('resize', () => {
    camera.aspect = window.innerWidth/window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
  });
}

function animate() {
  requestAnimationFrame(animate);

  const delta = 0.05;

  velocity.x -= velocity.x * 10.0 * delta;
  velocity.z -= velocity.z * 10.0 * delta;

  const speed = 5.0;
  if(moveForward) velocity.z -= speed * delta;
  if(moveBackward) velocity.z += speed * delta;
  if(moveLeft) velocity.x -= speed * delta;
  if(moveRight) velocity.x += speed * delta;

  controls.moveRight(velocity.x * delta);
  controls.moveForward(velocity.z * delta);

  renderer.render(scene, camera);
}
</script>

</body>
</html>
